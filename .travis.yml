language: python
sudo: required
services:
- docker
python:
- 3.6
notifications:
  email:
    on_success: change
    on_failure: change
install:
- pip install -r requirements.txt
- pip install -r requirements-dev.txt
- pip install coveralls
- pip install pycodestyle
script:
- coverage run manage.py test
- pycodestyle --config=.pycodestylerc .
after_success:
- coveralls
- python aws_env.py
- bash deploy.sh
env:
  global:
  - DEBUG=True
  - ALLOWED_HOSTS=127.0.0.1, localhost, h7alt5p1bi.execute-api.ca-central-1.amazonaws.com,
  - ORGANIZATION=Blitz Paradisio
  - EMAIL_SERVICE=True
  - AUTO_ACTIVATE_USER=False
  - ACTIVATION_URL=https://da6gat167y18o.cloudfront.net/membership/confirmation/{{token}}
  - FORGOT_PASSWORD_URL=https://da6gat167y18o.cloudfront.net/reset-password/{{token}}
  - AWS_S3_REGION_NAME=ca-central-1
  - AWS_STORAGE_STATIC_BUCKET_NAME=thesezvous-api-static
  - AWS_STORAGE_MEDIA_BUCKET_NAME=thesezvous-api-media-dev
  - AWS_S3_STATIC_CUSTOM_DOMAIN=thesezvous-api-static.s3.ca-central-1.amazonaws.com
  - AWS_S3_MEDIA_CUSTOM_DOMAIN=thesezvous-api-media-dev.s3.ca-central-1.amazonaws.com
  - STATIC_URL=https://thesezvous-api-static.s3.ca-central-1.amazonaws.com/
  - STATICFILES_STORAGE=blitz_api.storage_backends.S3StaticStorage
  - MEDIA_URL=https://thesezvous-api-media-dev.s3.ca-central-1.amazonaws.com/
  - MEDIA_ROOT=https://thesezvous-api-media-dev.s3.ca-central-1.amazonaws.com/
  - DEFAULT_FILE_STORAGE=blitz_api.storage_backends.S3MediaStorage
  - CONFIRM_SIGN_UP=6
  - FORGOT_PASSWORD=7
  - EMAIL_BACKEND=anymail.backends.sendinblue.EmailBackend
  - DEFAULT_FROM_EMAIL=noreply@thesezvous.org
  - PAYSAFE_BASE_URL=https://api.test.paysafe.com/
  - PAYSAFE_VAULT_URL=customervault/v1/
  - PAYSAFE_CARD_URL=cardpayments/v1/
  - EMAIL_HOST_USER=admin@fjnr.ca
  - ADMINS='("Francis Jeanneau", "francis.jeanneau@fjnr.ca"), ("NoÃ«l Rignon", "noel.rignon@fjnr.ca"),'
  - SERVER_EMAIL=admin@fjnr.ca
  - EMAIL_HOST=smtp.zoho.com
  - secure: bG5iV/nSmrRH+u3cloAIyVVaGZQ6OujoR3K3QdvhBofUDA7Ila2tXrovDUrjDzL7Lq/rIZelVA8kIy/1RyWoEV0Rq+2x5nKY37NAtOymxNM24I/kbRczuD58qbPrW8Yoht4WPiX75MLretug+9ambT4M7drbY/+w6NGKCAqX4BDfrxFpDFdNn2+Uiw/NycaUkdSBZb3puZ7CIsStaXeuxMAS6mWXjJz2EQSEsFDzLyNZNICraR7at6m9ip5bwEb7DeFLbJMPs2JNvoP3lk+DdkBJ236bhccBYUdfMfzmToJQTG8ig3KaLVZ6DJpeyxXT4L4lxGSp2kzNs1Kv3CLfeXfk89+5EPw6Sk/wfYRtrBMBLwx7Lb+0/cRs1XxJxf90btrG6I7leYS8J4bqx6gQalJAOZgzr/CN7xgpUbOjO77Wl46uvYIzIX2KEJTw2HTEfv+7olyqJ+sl1zX58rENEQxTXoVIpx9Co2Z6hxltSsQ1Ox0/+FkTKYLPvHqMIvHScCgj4fj7gh0VboeVn9nbpJZaF2NaXPMFdIclKtaQFyMd2nr9MyWGWEgq2R1xXV/hCMdH1AjW1RXp8L/KN0inMXTRAvcE+uFnh3nzbEwxjvtCbVZstcqlokO8c3TP8lorKwIEcI02KY6ZHvUyqxh/SQgjIJ/Ol485F9plpbsrKCM=
  - secure: DkgPUTHxYRft/B+uTlqESkUsBK9l3glrnb4hs2+BOTzk+qWWjduvRmuEbkVc8fBHGOa7R5nY9/OxAi3jayXvMVNF2uQDCuV05MLCEOblqMi0o2noX3t5c2zQwi9Nm8gL+XZeCgRedMOerGUG90U5yV9X09IIzmwrvM9jxDjPkPlyIqb+vW7dqL9aba85zSfBKHvUXSNYQcJw+DewCuH+OVcxV2QC+THzbyJckVwhBbrlAsCIMyg2NEZ4t2hXzr2Acg7z7i30lq+oZnTtEdmhEMIb7AWLghHLhZ+aEPDL/vKischWoZ6mBE57J6BW3x2ttMTmu9bQQ5ZMy7ah81cWHu01knSQRd7NywQ7UPDJJFLwFSZjU/AjU8G/ZXnTkgmYQ6+yvsqJ0Rh38TALxxEEjGLxS/RntCJ3oZyHhbWS93zh6m+JW6bhieGkGc47u98EKFi864q5H6jjak3wqIzA1PwE2zMbCmDNIHRRNMjqUKWbohiGsJdMtuOJwjMea8eDZ94MvNIjDEj6zRsuUVgC7ceiECzSTl3jNfxPQ9aXdnUeKjPFVDhuHrJJoBJKxuWtyjv4fxynEbrGCHsHI7TQF97ceZvArKG5d8ndcNXj0oNncJukjAHtQkC2gna1lEkhPjQ8zMiq9kR3yOR9GC8XovgT/19LRHy+jRlAnjOtUqk=
  - secure: Xb9QRhgTUjpCDAM5LUtxXkwZwbdcBQ+o1xy1u7Rk3TlLjvwu7J4rZFX0bN+J8m03bAp3pke5LaL2AnQh/YXICdke/nA/ruR/CjliaeSDnXTVqV2KcAr6bYZvhMx9yFUzCTJ8n8SiZgTfi/68Ax6JJEpLqSqwap8DagF+R8ye0DkQpaUCjhUiQ74jnbioetMDqWUL9XCTF4GlxPvu7wRcLu2ssjh8jGbOOnZ/J6MIuRPv1sD0DPT/HVLcqpLFsCG1CZb+HsmYXTI1xhZONg6mpvw7Bjp7GrXqyhZsHeWdygzqRdbq/ZNDn5mESggO2VgcMWEwN4L2+LktFL05IiLPk9wGMI/OS3nswf9yV0KWyDcK787AlY+YglugbaIitz+aPPnrVsUArRrqsdk6PzLvfJpLKa91LlMD3M/qzw3dB4e0hcnYoA6STMXol20cNXuApGd4bXMb6m4LzgQpdzj2DF9WcHkHVa1GwjGcVMmbPkeiY3pU8oy2KlIAVUwDrRXd/L+AGHONuwclnLVRsdV/sgpP5E5mM3DKCFk3uAo1NP/OeU41bmfJmWzX3d+tXIw+P0v/tkK3MDbKrWAbUMclUpUcBzxzBDzcjKfwn0TXr5tgcIpLk1YzRk6A4TCqglamMCMu/jjWZhGNmn87ZE8dM8qQOhQ8xbGgrcI5LArN6DU=
  - secure: h1KdVunE8p0dilxH0g7MNDIDbWSwr3Sp5aZYNi3BkY5N3ZC52Wu3ZgsJ2beOMB1HpsXMklDhOQyS93UbRb6pQ2dElDdfd9LTqh7B7Q8DtD341vrqSxrRgfVJd3sPzBwNtHJEEMDky0MYkzfgS/EfOyqTw1Ilh4Q/NufiVXpRx0yXZdRs7ET5V6HfsNB7UMqBvd/qnymbBJCM9vTe2glGym+TKI+yEJ7vaQ40yH3rr9wlMLbLoUTP4Zq0VShNJpcGLy4tv0MLUV2+sVmi6mYznWmxdYPNn+kttBrR6QbYs9LaBS+CtzQ3+HimyE1Prk09pEBstvfVVJy2/gRw7T9s24+vjqy9SAZPh9TR3DWiP8C77ljY4thrCOQ5+e6QI01icZwtTE8ufVGu9aeiUWq50EBIWN6t7/Xwy2tBf6rfTYGv0BWtnXE1mILW0BXxzL6jUT2QPskNK7dVcTxAPTOkXoBMXu3/ugVxd8+ZpFNlUKdUoNVm9JBavoxK2YRRfH1Vme5OYnsqSU2vRCQoOq7rgBGUNM1Ej9EcwVJ6lE1Kh5oJfUkhQpBSz9qYOaeG0fQUm4aEFadEYjnHr9vsY5BPduC19kGBHEYp1updrgZf5r4+ll+nxIQWy46fm0b8LppaDvnBbo1NsEQwiIISfSD0SyOKqO3O/wa+SVQyfr1oZD8=
  - secure: DD3MRkOpKxYjqWZyt+C4rSuxrWe1rFzVdnw0MhYOzLv00mcH4TwKZRev0aPGl0wWQlvG4hlxWAHbuJ8PDX6Us0He/9sc2F2tLAfrNhN0Ff6mk0B21GofgkOazLCNXzb2RdNlqlmkc+rwdWQIdwKlsGM4XoJXZdlZYD2eXX15FpEhQT24DTJRDk0nZ6mPDJPAYMu5VRzCLqRdJ9eTCbDg1QvGN0KLpuRVzVHDFM8aPzafWltjYieVAbhXY/nk4gTgeNIANBqUfKZ+qzwZgKVgunPxRXkJMK9ZGhL+u8jFoS4O3ocKSf1sr5pgmbF9zwGVEE0LFXCXyP3NGvtTT4oBriboR8NFfJImLEDslk0IyJQdqoG+aNlz0BWRh0UUhZwwAm7D9zg2+wLTjECn2LZzSkzrKdu9w5hgJmCGfbC0d4EWiwTgF3cQuBmmzqCHGGEH00El4hdH8w1zuKnGDitGqyjtPnCRFV/BKJcuUtmXCLJb6cU0A7w7T+9qjBllAij6MxbPSgXRrry0zFqd/1cXMvhjeqct2mfo85G3B9CGj9OqY1wkyzhqJB6kA5+WFF2jpvnCBp1O0S5EsRSY594mVOKS68QE3Tr+fX0pbf37A7u1wPYpw7BvFaOhs4Z1nCPgqTRuE4nWQDZkB5n6JbVSirGCkZQFjOEiF+g+VgCJ6wM=
  - secure: 1cfGbLLpKo178MMzPDaCbrAYv0bYpgQjwrXzm4ta5lV60WJKBXyi00PJxRom5h8e5OaDi/cLQAvCBCqr3TxWIJj1/6Y/RvLCxuBaVQ7YaxNXR/63kMeWxSsXdgFHCYHxzfIzoCsYsFwZh2O6mkS6/2tZsgVNNL3TW6SX4aWAYFo2qPcxzDA1U/Nr5drcUpAevcM/oRkYJP6gzkOy3oDZcO3P4pxenSEQM2Nvi1+h13VVKRUBAAvca8uNGmExWeh5cCoIOlJJXFmS5FLCtXbU8Up3YHbBFk5kYNNul2kbFzy+wVCQ+YwtklFXnDm99pZVfUvvOVzT/3wvUCBNQgWbdm5BfBSWyh0NZGSbKsv8Ho+QNkSU9TQAMMtZd69c/SITlYyflbP1TxoxPtLUaQGzVK5MOWGIW6n4o8IV60zQVTIcU1XiUhu88zNn4is+RfhMf/J6Zb4JrBM0POMROKobIKhIicKO0JVK80nDyaisbM92g9I3MgaGsuACs0bYSbhdAQCKm27zjVRdHglMsQaokkVBl6P4g3xsUoxSGYmQ41GZQq8UIymmeEiGs/GdRVmSkf6tcC+rbnz9H8y3vQcNUaPmPMAKJuT4yBoWP4PhkEr7YdexCLo65oVJ+tQR6C+kUhOo3DThb7KfyyBTrPfZEldtZ0+a+aaWtQeHjZlED8c=
  - secure: SbYTiLP1Jq3EIo3SrbeHNvovhWouVD8CItrRaGQmtMDs4x1iUQB0/tkghf8c3pI1bwgO+3NkRPjAdpUervtrUJTA+YV+glHsj+F6xG7zKDKPVPN3RW7zwKbq0JSd/CKS0O9NZDHzqCrFCcq9yGnF4qHMnjGfBt3ECMRIghzB3aJrwnoNeNoiRnLHF5w0YSob2Atc5T4iRtXPp6BNB6p+L86oBID5htgxETVTy//2dONnhFNzUrZHGV6QdiJ+akXaXP1HPuOG/jbdDC/fxtSsSyNlhBqhgzf4CTrPXCJ1WTDxemOoDy5gP5GYeQqUUgLIizy+urWG1fDK03iGOS0ZBKsCTU/84RrcGbINgSoHYFpFe+QNu/Pfo6jTcfug7XD2+NqXK1QsAdt6EBXWSpnN9YMV1zP3ul779LDqHlvgWKphKjeK+ue2iCzULprevd8Cb1Z/ZMvvQTjTzAI6T6n6wgCkyzm4rqbDc31rtB1/e4R/SgTKjAy6c/RqjGpBBDaMYSXgM7p69DXgymg8Z1iEV7izOfPzFl1gJ8yt0sCbGLXIXwej1rkdHftXAByuhvG42ZUFeUBpnHDzjfJSn25S1H6EnJnrUSl1dHYLAjZ+TshqfwqZuB6pc4c+UrHwdlxwQvzqLHCBBe/9lG1o5j6QLEEDbn2V8Bcb3Krx+GdCD2Y=
  - secure: fph3BGplNcqX+NjQyMVVLpZvC5cqM6XmBrJwPrnv8ZeoHwZ5z5gX8p8QRscJdm/X0J1DyHil90zibg3nV11HNhhR7uev5G+35OV43yYoOp68QicEgyn8uOw8TuABLifgDkmuZQehNHNCQpicoXYlKQue4wTTHaaWsyN/eu0lKYS5ohWccxC3cnTOmgI52depH/KJx/XUulRgoTrzvKRdHmJpXmyMEMngGrDI35zCh5cSgwK/P+tAAfgEKwucUk/iK0x1LSx5rgd3Yf5xOwFviREWiwk62l1Tx262n/MP32a86PvqveLNN5qf489FtKb9MG0mVhu5+Q5J49jSpVfRCpG7r30KWYJ4o7NDDfFKTILlVK/3uVK53L25/DTgnFoAsC8foh46yKoRI/AEfQqnhf+52++iipcyJAa3+oiKX98Aliqc2EZmCPmy5tgJWyKoZwdlnGa3QcYDYaqdF9rzmqer1/tmGDwrxO4emP5xXz3Rz2O3SkcoYOz8DhJyaYHDX+boTxnlClweUZ47RKHDQ3bsvZg6byRbnydCFR1zf0YX9VDKztw/Z17N2cwQQIF1WaE8iEV8zKgfXqgaL7r7vSSJws5WdX1h1eTTMVImorNMNrNN5k3eML4mGFyi4jJ9J3sOn6SDVLJxnB+zVwqfictU+O7albFWVh991YIdIM4=
  - secure: th0ZVVl4NnaiV+3hrMctmyYMCy57419pHK6Y9tPSEvRBLZ1DcttCNHXnE/DeuJu+MXPN7+GEU8ukP3zDDFiY+GThLrwlqTdqByj9zj31FedD+u9Oz8ookSBLtI4J25jnTQFZLJdR90wxxiSHjp57Xs36pqWu9J3kAJfE13Z5OfdyUXGTHvHlv6b/7nwiZyvSxW/xXXDtYU0WMl0Do9gTVS0wT7Jlye8tLtys7I+7ofE0X08/ACgjzdRGsT1+D2LpaGndRiZVakmYg2LdbjLf6hgequ2L3xGtGLL/mvc8ZWPh0ZrVIg8cQui/BZsXdZQJf215F2oOTbvzlXV0P50XqgKV7Qdq3EYfQVeoRpaHGEczpQq8AYVCt8ebE/FhoabaisQCqBchE/yHDSPBbUtczdWTrRqguSC9NE2HL5PD558/D0S1R+i5VbOfX1TLA7ile7QGseiORHdGL9/D5zQDAuEjXoHiDXF7DsVkNHTSvIBZG/4uMQMZpYgmuDvSULvjI2UAiJkYgSxECe/SyR6uC9HRksQLrrnsuNk5j1CG+1gl/4A+id0yZVszz5hKhYh7ObBSmeicdapgJhm5TfACYNTzjCbCVlJvFKaV34f/Ktv35eK3IU/Nu/gns0oArlKTMp8iq5D6TqOrREDo0aei398G2taWRuV1oeIfHbK++GU=
